import{o as C,c as S,a as d,a4 as j,b as A,a5 as q,e as P,f as ae,a2 as le,a3 as Ce,F as ne,J as fe,a1 as re,m as V,d as ie,t as R,w as ze,k as w,u as x,l as k,x as ue,a7 as ce,h as X,a0 as J,p as Q}from"./index.7a4453cf.js";import{b as Me,d as Se,a as de}from"./useDeckGL.c152290a.js";import{V as Ae,j as Ie,_ as W,k as Te,m as Oe,n as Le,O as ke,L as Ee,p as Ne,b as Re,U as Fe,M as De,G as je,D as Be,C as pe}from"./layer.6384b77b.js";import{a as Ve,f as ge,o as F,P as $,w as $e,t as he,b as Ue,R as ve,c as T,T as Z,m as Ge,O as D,N as O,u as Ze,r as qe}from"./hidden.20d3f4bf.js";import{g as Ke}from"./phong-lighting.adf0dbf3.js";import{r as We}from"./HomeIcon.aee6e485.js";import"./objects.1ec32615.js";function Ye(t,o){return C(),S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M11.828 2.25c-.916 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 01-.517.608 7.45 7.45 0 00-.478.198.798.798 0 01-.796-.064l-.453-.324a1.875 1.875 0 00-2.416.2l-.243.243a1.875 1.875 0 00-.2 2.416l.324.453a.798.798 0 01.064.796 7.448 7.448 0 00-.198.478.798.798 0 01-.608.517l-.55.092a1.875 1.875 0 00-1.566 1.849v.344c0 .916.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 01-.064.796l-.324.453a1.875 1.875 0 00.2 2.416l.243.243c.648.648 1.67.733 2.416.2l.453-.324a.798.798 0 01.796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.344c.916 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 01.517-.608 7.52 7.52 0 00.478-.198.798.798 0 01.796.064l.453.324a1.875 1.875 0 002.416-.2l.243-.243c.648-.648.733-1.67.2-2.416l-.324-.453a.798.798 0 01-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.091a1.875 1.875 0 001.566-1.85v-.344c0-.916-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 01-.608-.517 7.507 7.507 0 00-.198-.478.798.798 0 01.064-.796l.324-.453a1.875 1.875 0 00-.2-2.416l-.243-.243a1.875 1.875 0 00-2.416-.2l-.453.324a.798.798 0 01-.796.064 7.462 7.462 0 00-.478-.198.798.798 0 01-.517-.608l-.091-.55a1.875 1.875 0 00-1.85-1.566h-.344zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z","clip-rule":"evenodd"})])}function He(t,o){return C(),S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{d:"M21.721 12.752a9.711 9.711 0 00-.945-5.003 12.754 12.754 0 01-4.339 2.708 18.991 18.991 0 01-.214 4.772 17.165 17.165 0 005.498-2.477zM14.634 15.55a17.324 17.324 0 00.332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 00.332 4.647 17.385 17.385 0 005.268 0zM9.772 17.119a18.963 18.963 0 004.456 0A17.182 17.182 0 0112 21.724a17.18 17.18 0 01-2.228-4.605zM7.777 15.23a18.87 18.87 0 01-.214-4.774 12.753 12.753 0 01-4.34-2.708 9.711 9.711 0 00-.944 5.004 17.165 17.165 0 005.498 2.477zM21.356 14.752a9.765 9.765 0 01-7.478 6.817 18.64 18.64 0 001.988-4.718 18.627 18.627 0 005.49-2.098zM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 001.988 4.718 9.765 9.765 0 01-7.478-6.816zM13.878 2.43a9.755 9.755 0 016.116 3.986 11.267 11.267 0 01-3.746 2.504 18.63 18.63 0 00-2.37-6.49zM12 2.276a17.152 17.152 0 012.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0112 2.276zM10.122 2.43a18.629 18.629 0 00-2.37 6.49 11.266 11.266 0 01-3.746-2.504 9.754 9.754 0 016.116-3.985z"})])}function Xe(t,o){return C(),S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{d:"M11.644 1.59a.75.75 0 01.712 0l9.75 5.25a.75.75 0 010 1.32l-9.75 5.25a.75.75 0 01-.712 0l-9.75-5.25a.75.75 0 010-1.32l9.75-5.25z"}),d("path",{d:"M3.265 10.602l7.668 4.129a2.25 2.25 0 002.134 0l7.668-4.13 1.37.739a.75.75 0 010 1.32l-9.75 5.25a.75.75 0 01-.71 0l-9.75-5.25a.75.75 0 010-1.32l1.37-.738z"}),d("path",{d:"M10.933 19.231l-7.668-4.13-1.37.739a.75.75 0 000 1.32l9.75 5.25c.221.12.489.12.71 0l9.75-5.25a.75.75 0 000-1.32l-1.37-.738-7.668 4.13a2.25 2.25 0 01-2.134-.001z"})])}const ee=Math.PI/180;function Je({height:t,focalDistance:o,orbitAxis:n,rotationX:l,rotationOrbit:e,zoom:a}){const p=n==="Z"?[0,0,1]:[0,1,0],_=n==="Z"?[0,-o,0]:[0,0,o],g=new Oe().lookAt({eye:_,up:p});g.rotateX(l*ee),n==="Z"?g.rotateZ(e*ee):g.rotateY(e*ee);const f=Math.pow(2,a)/t;return g.scale(f),g}class Qe extends Ae{constructor(o){const{height:n,projectionMatrix:l,fovy:e=50,orbitAxis:a="Z",target:p=[0,0,0],rotationX:_=0,rotationOrbit:g=0,zoom:f=0}=o,h=l?l[5]/2:Ie(e);super({...o,longitude:void 0,viewMatrix:Je({height:n||1,focalDistance:h,orbitAxis:a,rotationX:_,rotationOrbit:g,zoom:f}),fovy:e,focalDistance:h,position:p,zoom:f}),W(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(o,{topLeft:n=!0}={}){const[l,e,a=this.projectedCenter[2]]=o,p=n?e:this.height-e,[_,g,f]=Te([l,p,a],this.pixelUnprojectionMatrix);return[_,g,f]}panByPosition(o,n){const l=this.project(o),e=[this.width/2+l[0]-n[0],this.height/2+l[1]-n[1],this.projectedCenter[2]];return{target:this.unproject(e)}}}class me extends Le{constructor(o={}){super(o),this.props.orbitAxis=o.orbitAxis||"Z"}get ViewportType(){return Qe}get ControllerType(){return ke}}W(me,"displayName","OrbitView");const et=`#define SHADER_NAME point-cloud-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceNormals;
attribute vec4 instanceColors;
attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusPixels;
uniform int sizeUnits;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.normal = project_normal(instanceNormals);

  // position on the containing square in [-1, 1] space
  unitPosition = positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  // Find the center of the point and add the current vertex
  vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);
  DECKGL_FILTER_SIZE(offset, geometry);

  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);
  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply lighting
  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);

  // Apply opacity to instance color, or return instance picking color
  vColor = vec4(lightColor, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,tt=`#define SHADER_NAME point-cloud-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition);

  if (distToCenter > 1.0) {
    discard;
  }

  gl_FragColor = vColor;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,xe=[0,0,0,255],be=[0,0,1],ot={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:t=>t.position},getNormal:{type:"accessor",value:be},getColor:{type:"accessor",value:xe},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};function nt(t){const{header:o,attributes:n}=t;!o||!n||(t.length=o.vertexCount,n.POSITION&&(n.instancePositions=n.POSITION),n.NORMAL&&(n.instanceNormals=n.NORMAL),n.COLOR_0&&(n.instanceColors=n.COLOR_0))}class K extends Ee{getShaders(){return super.getShaders({vs:et,fs:tt,modules:[Ne,Ke,Re]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:be},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:xe}})}updateState(o){const{changeFlags:n,props:l}=o;if(super.updateState(o),n.extensionsChanged){var e;const{gl:a}=this.context;(e=this.state.model)===null||e===void 0||e.delete(),this.state.model=this._getModel(a),this.getAttributeManager().invalidateAll()}n.dataChanged&&nt(l.data)}draw({uniforms:o}){const{pointSize:n,sizeUnits:l}=this.props;this.state.model.setUniforms(o).setUniforms({sizeUnits:Fe[l],radiusPixels:n}).draw()}_getModel(o){const n=[];for(let l=0;l<3;l++){const e=l/3*Math.PI*2;n.push(Math.cos(e)*2,Math.sin(e)*2,0)}return new De(o,{...this.getShaders(),id:this.props.id,geometry:new je({drawMode:4,attributes:{positions:new Float32Array(n)}}),isInstanced:!0})}}W(K,"layerName","PointCloudLayer");W(K,"defaultProps",ot);function at(t,o){return C(),S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z","clip-rule":"evenodd"})])}function rt(t,o){return C(),S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M3.28 2.22a.75.75 0 00-1.06 1.06l14.5 14.5a.75.75 0 101.06-1.06l-1.745-1.745a10.029 10.029 0 003.3-4.38 1.651 1.651 0 000-1.185A10.004 10.004 0 009.999 3a9.956 9.956 0 00-4.744 1.194L3.28 2.22zM7.752 6.69l1.092 1.092a2.5 2.5 0 013.374 3.373l1.091 1.092a4 4 0 00-5.557-5.557z","clip-rule":"evenodd"}),d("path",{d:"M10.748 13.93l2.523 2.523a9.987 9.987 0 01-3.27.547c-4.258 0-7.894-2.66-9.337-6.41a1.651 1.651 0 010-1.186A10.007 10.007 0 012.839 6.02L6.07 9.252a4 4 0 004.678 4.678z"})])}function st(t,o){return C(),S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[d("path",{d:"M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"}),d("path",{"fill-rule":"evenodd",d:"M.664 10.59a1.651 1.651 0 010-1.186A10.004 10.004 0 0110 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0110 17c-4.257 0-7.893-2.66-9.336-6.41zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})])}function lt(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(o=>setTimeout(()=>{throw o}))}let it=j({props:{onFocus:{type:Function,required:!0}},setup(t){let o=A(!0);return()=>o.value?q(ge,{as:"button",type:"button",features:Ve.Focusable,onFocus(n){n.preventDefault();let l,e=50;function a(){var p;if(e--<=0){l&&cancelAnimationFrame(l);return}if((p=t.onFocus)!=null&&p.call(t)){o.value=!1,cancelAnimationFrame(l);return}l=requestAnimationFrame(a)}l=requestAnimationFrame(a)}}):null}}),ye=Symbol("TabsContext");function U(t){let o=re(ye,null);if(o===null){let n=new Error(`<${t} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,U),n}return o}let se=Symbol("TabsSSRContext"),ut=j({name:"TabGroup",emits:{change:t=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:o,attrs:n,emit:l}){let e=A(null),a=A([]),p=A([]),_=P(()=>t.selectedIndex!==null),g=P(()=>_.value?t.selectedIndex:e.value),f={selectedIndex:P(()=>{var u,v;return(v=(u=e.value)!=null?u:t.defaultIndex)!=null?v:null}),orientation:P(()=>t.vertical?"vertical":"horizontal"),activation:P(()=>t.manual?"manual":"auto"),tabs:a,panels:p,setSelectedIndex(u){g.value!==u&&l("change",u),_.value||(e.value=u)},registerTab(u){a.value.includes(u)||a.value.push(u)},unregisterTab(u){let v=a.value.indexOf(u);v!==-1&&a.value.splice(v,1)},registerPanel(u){p.value.includes(u)||p.value.push(u)},unregisterPanel(u){let v=p.value.indexOf(u);v!==-1&&p.value.splice(v,1)}};le(ye,f);let h=A({tabs:[],panels:[]}),L=A(!1);return ae(()=>{L.value=!0}),le(se,P(()=>L.value?null:h.value)),Ce(()=>{var u;if(f.tabs.value.length<=0||t.selectedIndex===null&&e.value!==null)return;let v=f.tabs.value.map(r=>F(r)).filter(Boolean),m=v.filter(r=>!r.hasAttribute("disabled")),E=(u=t.selectedIndex)!=null?u:t.defaultIndex;if(E<0)e.value=v.indexOf(m[0]);else if(E>f.tabs.value.length)e.value=v.indexOf(m[m.length-1]);else{let r=v.slice(0,E),b=[...v.slice(E),...r].find(I=>m.includes(I));if(!b)return;e.value=v.indexOf(b)}}),()=>{let u={selectedIndex:e.value};return q(ne,[a.value.length<=0&&q(it,{onFocus:()=>{for(let v of a.value){let m=F(v);if(m?.tabIndex===0)return m.focus(),!0}return!1}}),$({theirProps:{...n,...$e(t,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:u,slots:o,attrs:n,name:"TabGroup"})])}}}),ct=j({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:o,slots:n}){let l=U("TabList");return()=>{let e={selectedIndex:l.selectedIndex.value},a={role:"tablist","aria-orientation":l.orientation.value};return $({ourProps:a,theirProps:t,slot:e,attrs:o,slots:n,name:"TabList"})}}}),te=j({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${he()}`}},setup(t,{attrs:o,slots:n,expose:l}){let e=U("Tab"),a=A(null);l({el:a,$el:a}),ae(()=>e.registerTab(a)),fe(()=>e.unregisterTab(a));let p=re(se),_=P(()=>{if(p.value){let r=p.value.tabs.indexOf(t.id);return r===-1?p.value.tabs.push(t.id)-1:r}return-1}),g=P(()=>{let r=e.tabs.value.indexOf(a);return r===-1?_.value:r}),f=P(()=>g.value===e.selectedIndex.value);function h(r){var b;let I=r();if(I===Z.Success&&e.activation.value==="auto"){let B=(b=Ge(a))==null?void 0:b.activeElement,N=e.tabs.value.findIndex(G=>F(G)===B);N!==-1&&e.setSelectedIndex(N)}return I}function L(r){let b=e.tabs.value.map(I=>F(I)).filter(Boolean);if(r.key===T.Space||r.key===T.Enter){r.preventDefault(),r.stopPropagation(),e.setSelectedIndex(g.value);return}switch(r.key){case T.Home:case T.PageUp:return r.preventDefault(),r.stopPropagation(),h(()=>D(b,O.First));case T.End:case T.PageDown:return r.preventDefault(),r.stopPropagation(),h(()=>D(b,O.Last))}if(h(()=>Ze(e.orientation.value,{vertical(){return r.key===T.ArrowUp?D(b,O.Previous|O.WrapAround):r.key===T.ArrowDown?D(b,O.Next|O.WrapAround):Z.Error},horizontal(){return r.key===T.ArrowLeft?D(b,O.Previous|O.WrapAround):r.key===T.ArrowRight?D(b,O.Next|O.WrapAround):Z.Error}}))===Z.Success)return r.preventDefault()}let u=A(!1);function v(){var r;u.value||(u.value=!0,!t.disabled&&((r=F(a))==null||r.focus(),e.setSelectedIndex(g.value),lt(()=>{u.value=!1})))}function m(r){r.preventDefault()}let E=Ue(P(()=>({as:t.as,type:o.type})),a);return()=>{var r;let b={selected:f.value},{id:I,...B}=t,N={ref:a,onKeydown:L,onMousedown:m,onClick:v,id:I,role:"tab",type:E.value,"aria-controls":(r=F(e.panels.value[g.value]))==null?void 0:r.id,"aria-selected":f.value,tabIndex:f.value?0:-1,disabled:t.disabled?!0:void 0};return $({ourProps:N,theirProps:B,slot:b,attrs:o,slots:n,name:"Tab"})}}}),dt=j({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:o,attrs:n}){let l=U("TabPanels");return()=>{let e={selectedIndex:l.selectedIndex.value};return $({theirProps:t,ourProps:{},slot:e,attrs:n,slots:o,name:"TabPanels"})}}}),oe=j({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${he()}`}},setup(t,{attrs:o,slots:n,expose:l}){let e=U("TabPanel"),a=A(null);l({el:a,$el:a}),ae(()=>e.registerPanel(a)),fe(()=>e.unregisterPanel(a));let p=re(se),_=P(()=>{if(p.value){let h=p.value.panels.indexOf(t.id);return h===-1?p.value.panels.push(t.id)-1:h}return-1}),g=P(()=>{let h=e.panels.value.indexOf(a);return h===-1?_.value:h}),f=P(()=>g.value===e.selectedIndex.value);return()=>{var h;let L={selected:f.value},{id:u,...v}=t,m={ref:a,id:u,role:"tabpanel","aria-labelledby":(h=F(e.tabs.value[g.value]))==null?void 0:h.id,tabIndex:f.value?0:-1};return!f.value&&t.unmount&&!t.static?q(ge,{as:"span",...m}):$({ourProps:m,theirProps:v,slot:L,attrs:o,slots:n,features:ve.Static|ve.RenderStrategy,visible:f.value,name:"TabPanel"})}}});const pt={class:"flex-grow flex flex-row"},vt={class:"flex-grow bg-slate-200 relative"},ft={class:"absolute top-0 right-0 p-2"},gt={class:"w-80 bg-slate-400"},ht={class:"flex flex-col"},mt={class:"layer-head flex flex-row items-center bg-slate-400"},xt=["onClick"],bt={class:"flex-grow text-center"},yt={class:"font-bold mx-2"},wt=["onClick"],_t={class:"layer-body bg-slate-300"},Pt=d("span",{class:"flex-grow"},null,-1),Lt={__name:"PlotView",setup(t){const o={rotationX:0,rotationOrbit:0,target:[0,0,0],zoom:8,minZoom:0,maxZoom:20};function n(i,c){const s=c-i;return()=>i+Math.random()*s}function l(i,c){const s=n(i,c);return()=>Math.floor(s())}const e=(i,c)=>{const s=n(i,c);return z=>Array.from({length:z}).map(s)},a=(i,c)=>{const s=l(i,c);return z=>Array.from({length:z}).map(s)},p=i=>{const c=e(-1,1),s=a(0,255);return Array.from({length:i}).map(()=>{const[z,M]=c(2),[y,Y,H]=[2,Math.PI*M,.5*Math.PI*z];return{position:[y*Math.cos(H)*Math.cos(Y),y*Math.sin(H),y*Math.cos(H)*Math.sin(Y)],normal:[0,0,1],color:s(3),size:.01}})},_=V([{position:[1,0,0],normal:[0,0,1],color:[1,0,0,1],size:.01},{position:[0,1,0],normal:[0,0,1],color:[0,1,0,1],size:.01},{position:[0,0,1],normal:[0,0,1],color:[0,0,1,1],size:.01}]),g=V([{position:[-1,0,0],normal:[0,0,1],color:[0,1,1,1],size:.01},{position:[0,-1,0],normal:[0,0,1],color:[1,0,1,1],size:.01},{position:[0,0,-1],normal:[0,0,1],color:[1,1,0,1],size:.01}]),f=(...i)=>{const c={position:3,normal:3,color:4},s=i.map(M=>({position:new Float32Array(M.flatMap(y=>y.position)),normal:new Float32Array(M.flatMap(y=>y.normal)),color:new Float32Array(M.flatMap(y=>y.color))})),z=i.map((M,y)=>({length:M.length,attributes:{getPosition:{value:s[y].position,size:c.position},getNormal:{value:s[y].normal,size:c.normal},getColor:{value:s[y].color,size:c.color}}}));return{buffers:s,descriptors:z}},{buffers:h,descriptors:L}=f(_,g);console.log(h,L);const u=ie({title:"Points 1",descriptors:L,index:0,data:P(()=>V(u.descriptors[u.index])),count:0,options:{position:{title:"Position"},color:{title:"Color"},size:{title:"Size",range:[1,10],value:8}},reload:i=>{i.index=(i.index+1)%i.descriptors.length,i.count=i.data.length},visible:!0,enabled:!0}),v=1e4,m=ie({layers:{"point-cloud-layer-1":u,"point-cloud-layer-2":{title:"Points 2",data:V(p(v)),count:0,options:{position:{title:"Position"},color:{title:"Color"},size:{title:"Size",range:[1,10],value:2}},reload:i=>{i.data=V(p(v)),i.count=i.data.length},visible:!0,enabled:!0}},views:{"orbit-view":{title:"Orbit",options:{orbitAxis:"Y",fovy:50,near:.1,far:1e3}}},viewState:{...o}}),E=Me(me,{id:"orbit-view",orbitAxis:"Y",fovy:50,near:.1,far:1e3,orthographic:!1,controller:!0}),r=i=>{const c=m.layers[i];return de(K,{id:i,data:R(c,"data"),coordinateSystem:pe.CARTESIAN,coordinateOrigin:[0,0,0],pointSize:R(c.options.size,"value"),getPosition:s=>s.position,getNormal:s=>s.normal,getColor:s=>s.color,updateTriggers:{getPosition:void 0,getNormal:void 0,getColor:void 0},transitions:{getPosition:1e3,getNormal:1e3,getColor:1e3},pickable:!1,visible:R(c,"visible")})},I=(i=>{const c=m.layers[i];return de(K,{id:i,data:R(c,"data"),coordinateSystem:pe.CARTESIAN,coordinateOrigin:[0,0,0],pointSize:R(c.options.size,"value"),transitions:{getPosition:1e3,getNormal:1e3,getColor:1e3},pickable:!1,visible:R(c,"visible")})})("point-cloud-layer-1"),B=r("point-cloud-layer-2"),N=A(null),G=A(null);Se(Be,{canvas:N,width:"100%",height:"100%",layers:[I,B],views:[E],viewState:R(m,"viewState"),glOptions:{preserveDrawingBuffer:!0}});const we=i=>{i.visible=!i.visible},_e=()=>{m.viewState={...o}},Pe=i=>{const c=N.value,s=G.value,z=c.toDataURL("image/png").replace("image/png","image/octet-stream");s.setAttribute("href",z),s.setAttribute("download",i)};return(i,c)=>(C(),S("div",pt,[d("main",vt,[d("div",{class:"bg-stone-800 h-full w-full",onContextmenu:c[0]||(c[0]=ze(()=>{},["prevent"]))},[d("canvas",{ref_key:"canvasRef",ref:N},null,512)],32),d("div",ft,[d("a",{class:"mx-2",ref_key:"downloadRef",ref:G},[d("button",{onClick:c[1]||(c[1]=s=>Pe("plot.png"))},[w(x(qe),{class:"text-white h-6 w-6"})])],512),d("button",{class:"mx-2",onClick:_e},[w(x(We),{class:"text-white h-6 w-6"})])])]),d("aside",gt,[w(x(ut),{as:"div",class:"h-full flex flex-row"},{default:k(()=>[w(x(dt),{class:"flex-grow"},{default:k(()=>[w(x(oe),null,{default:k(()=>[(C(!0),S(ne,null,ue(m.layers,(s,z)=>(C(),S("div",{key:z},[d("div",ht,[d("div",mt,[d("button",{class:"mx-2",onClick:M=>we(s)},[s.visible?(C(),ce(x(st),{key:0,class:"h-4 w-4 text-gray-600 hover:text-gray-900"})):(C(),ce(x(rt),{key:1,class:"h-4 w-4 text-gray-600 hover:text-gray-900"}))],8,xt),d("div",bt,[d("span",yt,X(s.title),1),J(" ("+X(s.count)+") ",1)]),d("button",{class:"mx-2",onClick:M=>s.reload(s)},[w(x(at),{class:"h-4 w-4 text-gray-600 hover:text-gray-900"})],8,wt)]),d("div",_t,[(C(!0),S(ne,null,ue(s.options,(M,y)=>(C(),S("div",{key:y},X(M.title),1))),128))])])]))),128))]),_:1}),w(x(oe),null,{default:k(()=>[J("Content 2")]),_:1}),w(x(oe),null,{default:k(()=>[J("Content 3")]),_:1})]),_:1}),w(x(ct),{class:"flex flex-col bg-slate-500 text-gray-600"},{default:k(()=>[w(x(te),{class:"p-2"},{default:k(({selected:s})=>[w(x(Xe),{class:Q(["h-6 w-6",{"text-gray-800":s}])},null,8,["class"])]),_:1}),w(x(te),{class:"p-2"},{default:k(({selected:s})=>[w(x(He),{class:Q(["h-6 w-6",{"text-gray-800":s}])},null,8,["class"])]),_:1}),Pt,w(x(te),{class:"p-2"},{default:k(({selected:s})=>[w(x(Ye),{class:Q(["h-6 w-6",{"text-gray-800":s}])},null,8,["class"])]),_:1})]),_:1})]),_:1})])]))}};export{Lt as default};
