import{H as f,I as z,f as v,J as g,K as b,N as j,u as m}from"./index.7a4453cf.js";import{a as y}from"./objects.1ec32615.js";const P=t=>t,p=y(m),u=t=>({center:{lng:t.longitude,lat:t.latitude},bearing:t.bearing,pitch:t.pitch,zoom:t.zoom}),C=t=>({longitude:t.center.lng,latitude:t.center.lat,bearing:t.bearing,pitch:t.pitch,zoom:t.zoom});function V(t,a){const s={instance:f(null)},l=()=>{const i=s.instance;i.value||(i.value=new t)},c=()=>{const i=s.instance;i.value&&(i.value=null)};return v(l),g(c),s}function _(t){const a={instance:f(null),props:z(t),viewState:{get value(){const e=a.instance?.value;if(e){const n={center:e.getCenter(),bearing:e.getBearing(),pitch:e.getPitch(),zoom:e.getZoom()};return C(n)}},set value(e){const n=a.instance?.value;if(n){const o=u(e);n.jumpTo(o)}}}};let s;const l=e=>e.controls.map(n=>m(n.instance)).filter(P),c=e=>e.on,i=e=>{const n=a.instance;if(!n.value){const o=Object.assign(p(e),u(e.viewState));n.value=new j.Map(o);for(const r of l(o))n.value.addControl(r);for(const[r,h]of Object.entries(c(o)))n.value.on(r,h);s=o}},d=e=>{const n=a.instance;if(n.value){let o=p(e);s.style!==o.style&&n.value.setStyle(o.style),s.projection!==o.projection&&n.value.setProjection(o.projection),s.viewState!==o.viewState&&n.value.jumpTo(u(o.viewState)),s=o}},w=()=>{const e=a.instance;e.value&&(e.value.remove(),e.value=null)};return v(()=>i(a.props)),g(w),b(a.props,d),a}export{_ as a,V as u};
