import{a as z,b as U,c as G}from"./useDeckGL.c152290a.js";import{_ as K,b as f,d as W,N as $,t as V,e as O,o as F,c as Y,a as s,k as c,u as x,l as p,a0 as d,h as u,z as H,A as J}from"./index.7a4453cf.js";import{D as A}from"./Dropdown.cc464b33.js";import{i as E}from"./objects.1ec32615.js";import{B as m}from"./mapbox-layer.23573ae4.js";import{r as Q}from"./hidden.20d3f4bf.js";import{r as X}from"./HomeIcon.aee6e485.js";import{S as Z}from"./scatterplot-layer.1f1d96a1.js";import{e as ee}from"./layer.6384b77b.js";import{M as oe}from"./mapbox-overlay.e8df382f.js";import{a as te}from"./propsExternal.2c2153d4.js";const ae=i=>(H("data-v-0c18dce0"),i=i(),J(),i),se={class:"flex-grow flex flex-row"},ie={class:"flex-grow bg-slate-200 relative"},ne={class:"absolute top-0 right-12 py-3"},le={class:"w-80 bg-slate-400 p-2"},re=ae(()=>s("h2",null,"Map Options",-1)),ce={__name:"MapOverlayView",setup(i){const _={longitude:-74.5,latitude:40,zoom:12,pitch:0,bearing:0},w=f(null),g=f(null),v=o=>({encode:o.decode,decode:o.encode}),h=(o,t)=>({encode:e=>o.encode(t.encode(e)),decode:e=>t.decode(o.decode(e))}),y=(o,t)=>({encode:e=>e?o[e]??t:t,decode:e=>e?.value}),M=v({encode:o=>({name:o}),decode:o=>o?.name}),T=({encode:o,decode:t})=>e=>O({get:()=>o(e.value),set:r=>{e.value=t(r)}}),S=o=>(t,e)=>T(o)(V(t,e)),n=E("value")([{title:"Albers",value:"albers"},{title:"Equal Earth",value:"equalEarth"},{title:"Equirectangular",value:"equirectangular"},{title:"Lambert",value:"lambertConformalConic"},{title:"Mercator",value:"mercator"},{title:"Natural Earth",value:"naturalEarth"},{title:"Winkel Tripel",value:"winkelTripel"},{title:"Globe",value:"globe"}]),R=h(y(n,n.mercator),M),j=v(R),l=E("value")([{title:"Dark Matter",value:m.DARK_MATTER_NOLABELS},{title:"Positron",value:m.POSITRON_NOLABELS},{title:"Voyager",value:m.VOYAGER_NOLABELS}]),N=y(l,Object.values(l)[0]),L=v(N),P=z(Z,{id:"my-scatterplot",data:[{position:[-74.5,40],size:100}],radiusScale:6,radiusMinPixels:3,radiusMaxPixels:9,getPosition:o=>o.position,getRadius:o=>o.size,getColor:[255,0,0]}),B=U(ee,{id:"my-mapview"}),k=G(oe,{interleaved:!0,layers:[P],views:[B]}),a=W({map:{options:{projection:{title:"Projection",options:n,option:n.mercator},style:{title:"Style",options:l,option:l[m.DARK_MATTER_NOLABELS]}}},viewState:{..._}}),D=te({container:w,projection:S(j)(a.map.options.projection,"option"),style:S(L)(a.map.options.style,"option"),viewState:V(a,"viewState"),preserveDrawingBuffer:!0},[k.instance,new $.NavigationControl]),I=o=>{const t=D.instance.value;if(t){const e=t.getCanvas(),r=g.value,q=e.toDataURL("image/png").replace("image/png","image/octet-stream");r.setAttribute("href",q),r.setAttribute("download",o)}},C=()=>{a.viewState={..._}},b=f(void 0);return O({get:()=>valueToOption(b.value),set:o=>b.value=optionToValue(o)}),(o,t)=>(F(),Y("div",se,[s("main",ie,[s("div",{class:"bg-stone-800 h-full w-full",ref_key:"containerRef",ref:w},null,512),s("div",ne,[s("a",{class:"mx-2",ref_key:"downloadRef",ref:g},[s("button",{onClick:t[0]||(t[0]=e=>I("plot.png"))},[c(x(Q),{class:"text-white h-6 w-6"})])],512),s("button",{class:"mx-2",onClick:C},[c(x(X),{class:"text-white h-6 w-6"})])])]),s("aside",le,[re,c(A,{modelValue:a.map.options.style.option,"onUpdate:modelValue":t[1]||(t[1]=e=>a.map.options.style.option=e),options:a.map.options.style.options},{button:p(({title:e})=>[d(u(e),1)]),option:p(({title:e})=>[d(u(e),1)]),_:1},8,["modelValue","options"]),c(A,{modelValue:a.map.options.projection.option,"onUpdate:modelValue":t[2]||(t[2]=e=>a.map.options.projection.option=e),options:a.map.options.projection.options},{button:p(({title:e})=>[d(u(e),1)]),option:p(({title:e})=>[d(u(e),1)]),_:1},8,["modelValue","options"])])]))}},Ve=K(ce,[["__scopeId","data-v-0c18dce0"]]);export{Ve as default};
