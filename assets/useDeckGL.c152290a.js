import{a as V}from"./objects.1ec32615.js";import{H as g,I as d,f as z,J as y,K as P,t as b,u as f}from"./index.7a4453cf.js";const w=l=>l,v=V(f);function S(l,o){const n={instance:g(null),props:d(l)},s=b(n.props,"id"),t=a=>{const i=n.instance;i.value||(console.log(`${s.value}::initialize`),i.value=o.initialize(i,a))},u=a=>{const i=n.instance;i.value&&(i.value=o.update(i,a))},p=()=>{const a=n.instance;a.value&&(console.log(`${s.value}::finalize`),a.value=o.finalize(a))};return z(()=>t(n.props)),y(p),P(n.props,u),n}function L(l,o){const n=t=>t.updateTriggers?v(t.updateTriggers):void 0,s=t=>Object.assign(v(t),{updateTriggers:n(t)});return S(o,{initialize:(t,u)=>new l(s(u)),update:(t,u)=>t.value.clone(s(u)),finalize:t=>null})}function T(l,o){const n=v;return S(o,{initialize:(s,t)=>new l(n(t)),update:(s,t)=>new l({...s.value.props,...n(t)}),finalize:s=>null})}function x(l,o){const n={instance:g(null),props:d(o)},s=v,t=a=>{const i=n.instance;i.value||(i.value=new l(s(a)))},u=a=>{const i=n.instance;i.value&&i.value.setProps(s(a))},p=()=>{const a=n.instance;a.value&&(a.value=null)};return z(()=>t(n.props)),y(p),P(n.props,u),n}function M(l,o){const n={instance:g(null),props:d(o)},s=c=>c.layers.map(e=>f(e.instance)).filter(w),t=c=>c.views.map(e=>f(e.instance)).filter(w),u=c=>Object.assign(v(c),{layers:s(c),views:t(c)}),p=c=>{const e=n.instance;e.value||(e.value=new l(u(c)))},a=c=>{const e=n.instance;e.value&&e.value.setProps(u(c))},i=()=>{const c=n.instance;c.value&&(c.value.finalize(),c.value=null)};return z(()=>p(n.props)),y(i),P(n.props,a),n}function R(l,o){const n={instance:g(null),props:d(o)},s=b(n.props,"viewState"),t=e=>e.layers.map(r=>f(r.instance)).filter(w),u=e=>e.views.map(r=>f(r.instance)).filter(w),p=()=>({initialViewState:s.value,viewState:void 0,onViewStateChange:e=>{s.value=e.viewState}}),a=e=>{const r=n.instance;if(!r.value){const m=Object.assign(v(e),{layers:t(e),views:u(e),...p()});r.value=new l(m)}},i=e=>{const r=n.instance;if(r.value){const m=Object.assign(v(e),{layers:t(e),views:u(e)});r.value.setProps(m)}},c=()=>{const e=n.instance;e.value&&(e.value.finalize(),e.value=null)};return z(()=>a(n.props)),y(c),P(n.props,i),n}export{L as a,T as b,M as c,R as d,x as u};
